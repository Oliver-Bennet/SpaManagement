{% extends "layout/base.html" %}
{% block title %}Ghi nh·∫≠n ti·∫øn tr√¨nh{% endblock %}

{% block content %}
<div class="container my-5">

    <div class="card shadow">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0">üìã Ghi nh·∫≠n ti·∫øn tr√¨nh d·ªãch v·ª•</h5>
        </div>

        <div class="card-body">
            <div class="alert alert-info">
                <div class="row">
                    <div class="col-md-6">
                        <p class="mb-2"><strong>üë§ Kh√°ch h√†ng:</strong> {{ appt.customer.full_name }}</p>
                        <p class="mb-2"><strong>üíÜ D·ªãch v·ª•:</strong>
                            <span class="text-primary fw-bold">
                                {{ appt.service.name if appt.service else appt.package.name }}
                            </span>
                        </p>
                        <p class="mb-2"><strong>üïí Th·ªùi gian ƒë·∫∑t:</strong> {{ appt.start_time }} - {{ appt.end_time }}</p>
                    </div>
                    <div class="col-md-6">
                        <p class="mb-2"><strong>‚è≥ Th·ªùi l∆∞·ª£ng:</strong>
                            {% if appt.service %}
                                {{ appt.service.duration_minute }} ph√∫t
                            {% else %}
                                {{ appt.package.get_duration() }} ph√∫t
                            {% endif %}
                        </p>

                        <p class="mb-2"><strong>üí∞ Gi√° ni√™m y·∫øt:</strong>
                            {% if appt.service %}
                                {{ "{:,.0f}".format(appt.service.price) }} VNƒê
                            {% else %}
                                {{ "{:,.0f}".format(appt.package.price) }} VNƒê
                            {% endif %}
                        </p>

                        <p class="mb-0"><strong>üìù Ghi ch√∫ (L·ªÖ t√¢n):</strong>
                            <span class="fst-italic text-danger">
                                {{ appt.note if appt.note else "Kh√¥ng c√≥ ghi ch√∫ ƒë·∫∑c bi·ªát" }}
                            </span>
                        </p>
                    </div>
                </div>
            </div>

            <form method="post">
                <div class="mb-3">
                    <label class="form-label fw-bold">Ghi ch√∫ k·ªπ thu·∫≠t (K·∫øt qu·∫£/T√¨nh tr·∫°ng):</label>
                    <textarea class="form-control" name="technician_note" rows="3"
                              placeholder="Nh·∫≠p t√¨nh tr·∫°ng da, c√°c b∆∞·ªõc ƒë√£ x·ª≠ l√Ω..."></textarea>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Ph·∫£n h·ªìi c·ªßa kh√°ch h√†ng:</label>
                    <textarea class="form-control" name="customer_feedback" rows="2"
                              placeholder="Kh√°ch h√†ng c√≥ h√†i l√≤ng kh√¥ng? Y√™u c·∫ßu g√¨ cho l·∫ßn sau?"></textarea>
                </div>

                <div class="mb-4">
                    <label class="form-label fw-bold">ƒê√°nh gi√° m·ª©c ƒë·ªô h√†i l√≤ng:</label>
                    <select class="form-select w-auto" name="rating">
                        <option value="5" selected>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (R·∫•t h√†i l√≤ng)</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (H√†i l√≤ng)</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê (B√¨nh th∆∞·ªùng)</option>
                        <option value="2">‚≠ê‚≠ê (Kh√¥ng h√†i l√≤ng)</option>
                        <option value="1">‚≠ê (R·∫•t t·ªá)</option>
                    </select>
                </div>

                <div class="text-end">
                    <a href="/technician" class="btn btn-secondary me-2">Quay l·∫°i</a>
                    <button type="submit" class="btn btn-success">
                        ‚úî Ho√†n th√†nh & L∆∞u h·ªì s∆°
                    </button>
                </div>
            </form>
        </div>
    </div>

</div>
{% endblock %}